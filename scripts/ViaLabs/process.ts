import { HDNodeWallet, JsonRpcProvider } from "ethers";

// connects to local node
const jsonRpcProvider = new JsonRpcProvider("https://evm-rpc.testnet-2.nibiru.fi:443");
// const jsonRpcProvider = new JsonRpcProvider("https://evm-rpc.nibiru.fi:443");
// const jsonRpcProvider = new JsonRpcProvider("http://localhost:8545");

// mnemonic for the HD wallet
const mnemonic = "guard cream sadness conduct invite crumble clock pudding hole grit liar hotel maid produce squeeze return argue turtle know drive eight casino maze host"
const owner = HDNodeWallet.fromPhrase(mnemonic, "", "m/44'/118'/0'/0/0").connect(jsonRpcProvider)

async function main() {
  console.log("owner address:", owner.address)

  const response = await owner.sendTransaction({
    to: '0x0eefCF172F7e5C04A8d565f4e955968221fDb18f',
    value: 0,
    data: '0x6206649a0000000000000000000000000000000000000000883b17b9c063709c2b0074b40000000000000000000000000000000000000000000000000000000000066eee0000000000000000000000000000000000000000000000000000000000001aff000000000000000000000000f17a03bd8d9f641ff2344b9fb5d786ddb62d09b8000000000000000000000000fb78f049683d3edc0808a03297df9da8f2633315000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000b11cadfdd2de8c84d626cc45bfe02b8effabb3ec00000000000000000000000000000000000000000000000000000000000f4240000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000041255c2857af4a578f4f0d954b358a0fddff1adc7d1e4929e5becf41cdbbeb7fd16a3a49e258835c5db0e73bdabfe9b126cb060569f8aedb582347c60e66e2d4a51b00000000000000000000000000000000000000000000000000000000000000',
    gasLimit: '214830',
    gasPrice: '1050000000000',
    chainId: 6911,
  })
  console.log("response: ", response)

  const receipt = await jsonRpcProvider.waitForTransaction(response.hash)
  console.log("receipt: ", receipt)
}

main()